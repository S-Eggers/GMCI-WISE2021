<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <link href="style.css" rel="stylesheet" />
    <title>Mein Profil - Study Group Finder</title>
</head>
<body>
<div class="grid">
    <header>
        <nav>
            <ul>
                <li class="logo">Study Group Finder</li>
                <li><a href="marketplace.html">Marktplatz</a></li>
                <li><a href="backend.html" >Meine Gruppen</a></li>
                <li><a href="profileempty.html" class="active">Profil</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <div class="user-detail">
            <div class="name">
                <h1>Max Mustermann</h1>
                <img src="empty_profile_picture.png">
            </div>

            <div class="description">
                <h2>Studiengang:</h2>
                <br>
                <p>---</p>
                <br>
                <h2>Semester:</h2>
                <br>
                <p>---</p>
                <br>
                <h2>Alter:</h2>
                <br>
                <p>---</p>
            </div>
            <div class="biography">
                <h2>Biographie</h2>
                <br>
                <p>---</p>
            </div>
            <div class="contact">
                <h2>Kontakt</h2>
                <br>
                <p>---</p>
            </div>
            <div class="courseofstudies" id="courseofstudies-not-uploaded">
                <h2>Studienvelauf</h2>
                <br>
                <p>Kein Studienverlauf hochgeladen</p>
            </div>
            <div class="courseofstudies" id="courseofstudies-uploaded">
                <h2>Studienvelauf</h2>
                <br>
                <p>Zuletzt aktualisiert am 01.01.2020</p>
                <div class="button-container">
                    <button class="big-button">Download</button>
                </div>
            </div>
        </div>
    </main>
    <aside>
        <div class="button-container">
            <button onclick="window.location.href='profile.html'" class="big-button">Profil bearbeiten</button>
        </div>
        <input type="file" id="study-file" style="display: none;" accept="application/pdf">
        <div class="button-container">
            <button class="big-button" id="upload" onclick='document.getElementById("study-file").click()'>Studienverlauf hochladen</button>
        </div>
        <div class="button-container" id="delete-container" style="visibility: hidden;">
            <button class="big-button" onclick="deleteStudyFile()">Studienverlauf löschen</button>
        </div>
    </aside>
    <footer>
        <div>&copy; 2021 The Wise Beavers</div>
    </footer>
</div>
</body>
<script>
    var studyFile = document.getElementById('study-file')
    studyFile.onclick = waitForAction

    function waitForAction() {
        document.body.onfocus = detectAction
    }

    async function detectAction() {
        await sleep(200)        //necessary to "fix" race condition
        if(studyFile.value.length)  {
            alert('Studienverlauf erfolgreich hochgeladen')
            document.getElementById("courseofstudies-not-uploaded").style.visibility = "hidden";
            document.getElementById("courseofstudies-uploaded").style.visibility = "visible";
            document.getElementById("delete-container").style.visibility = "visible";
        }
        else {
            alert('Nichts hochgeladen')
        }
        document.body.onfocus = null
    }

    function sleep(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
    }

    function deleteStudyFile(ms) {
        document.getElementById("courseofstudies-not-uploaded").style.visibility = "visible";
        document.getElementById("courseofstudies-uploaded").style.visibility = "hidden";
        document.getElementById("delete-container").style.visibility = "hidden";
        alert('Studienverlauf erfolgreich gelöscht')
    }
</script>
</html>
